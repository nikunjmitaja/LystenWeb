
@{
    ViewBag.Title = "Login";
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <META Http-Equiv="Cache-Control" Content="no-cache" />
    <META Http-Equiv="Pragma" Content="no-cache" />
    <META Http-Equiv="Expires" Content="0" />
    <title>Login</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" href="~/pages/ico/60.png">
    <link rel="apple-touch-icon" sizes="76x76" href="~/pages/ico/76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="~/pages/ico/120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="~/pages/ico/152.png">
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta content="" name="description" />
    <meta content="" name="author" />
    <link href="~/assets/plugins/pace/pace-theme-flash.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/plugins/bootstrapv3/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/plugins/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/plugins/jquery-scrollbar/jquery.scrollbar.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="~/assets/plugins/switchery/css/switchery.min.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="~/pages/css/pages-icons.css" rel="stylesheet" type="text/css">
    <link class="main-stylesheet" href="~/pages/css/pages.css" rel="stylesheet" type="text/css" />
     <link class="main-stylesheet" href="~/pages/css/style.css" rel="stylesheet" type="text/css" />
    <style>
        .hide {
            display: none;
        }
    </style>
    <script type="text/javascript">
        window.onload = function () {
            // fix for windows 8
            if (navigator.appVersion.indexOf("Windows NT 6.2") != -1)
                document.head.innerHTML += '<link rel="stylesheet" type="text/css" href="~/pages/css/windows.chrome.fix.css" />'
        }
    </script>
</head>
<body class="fixed-header ">
    <div class="login-box-shadow2"></div>
    <div class="login-box-shadow"></div>
    <div class="login-wrapper ">
        <div class="bg-pic">
            <img src="assets/img/demo/new-york-city-buildings-sunrise-morning-hd-wallpaper.jpg" data-src="assets/img/demo/new-york-city-buildings-sunrise-morning-hd-wallpaper.jpg" data-src-retina="assets/img/demo/new-york-city-buildings-sunrise-morning-hd-wallpaper.jpg" alt="" class="lazy">
             
        </div>
        <div class="login-container bg-white">
            <div class="p-l-50   p-r-50 p-t-20 m-t-30 sm-p-l-15 sm-p-r-15 sm-p-t-40">
                <img src="assets/img/logo.png" class="center-block" alt="logo" data-src="assets/img/logo.png" data-src-retina="assets/img/logo.png" height="22">
                <div class="" id="login">

                    @using (Html.BeginForm("Login", "Login", new { ReturnUrl = ViewBag.ReturnUrl }))
                    {
                        <p class="p-t-35">Sign into your pages account</p>
                        <span class="m_top_30" style="color:red">@ViewBag.Errormsg</span>

                        @*<img src="../assets/images/logo.png" alt="logo" class="logo_login img-responsive">*@

                        <div class="form-group form-group-default">
                            <label>Login</label>
                            <div class="controls">
                                <input type="text" placeholder="Email" class="form-control required" id="txtemail" autocomplete="off" name="Email" required>
                            </div>
                        </div>

                        <div class="form-group form-group-default">
                            <label>Password</label>
                            <div class="controls">
                                <input type="password" placeholder="Credentials" class="form-control required" autocomplete="off" name="Password" id="txtpassword" required>
                            </div>
                        </div>
                        <div class="form-group ">
                                <div class="col-md-6 no-padding">
                                    <div class="checkbox ">
                                        <input type="checkbox" id="RememberMe" name="RememberMe">
                                        <label for="RememberMe">Keep Me Signed in</label>
                                         

                                    </div>

                                </div>
                                <div class="col-md-6 text-right m-t-10">
                                    <a href="#" onclick="showForgotPass()" class="text-center   center-block text-muted">Forgot Your Password?</a>
                                </div> 
                        </div>
                        <div class="col-md-12 text-center m-t-20">
                            <button id="btnLogin" type="submit" onclick="return CheckLogin();" class="btn btn-primary btn-cons m-t-1">
                                Sign in
                            </button>
                        </div>
                            @*<div class="col-md-12 p0">

                                    <div class="form-group col-md-6 p0 m_top_10">
                                       
                                        <a href="javascript:void(0);" class="text-center m_top_20 center-block text-muted btn_add" data-toggle="modal" data-target="#myModal2"> Sign Up</a>
                                    </div>
                                </div>*@
                            }
                        </div>
                <div class="  hide" id="forgot">
                    <p class="p-t-35">Forgot Password</p>
                    @*                    <img src="../assets/images/logo.png" alt="logo" class="logo_login img-responsive">*@

                    <div class="form-group form-group-default">
                        <label>Email</label>
                        <div class="controls">
                            <input type="text" id="txtforgotemail" placeholder="Email" class="form-control " autocomplete="off" name="Email" required>
                        </div>
                    </div>

                    <input type="button" id="btnsubmitforgot" class="btn btn-primary btn-cons m-t-1" value="Submit" onclick="return SendForgotaPassword()" />
                    <a href="#" onclick="hideForgotPass()" class="text-center center-block text-muted" style="position:absolute;top:20px;right:20px;opacity: 0.5;"><i class="fa fa-times"></i></a>
                </div>


            </div>
        </div>

    </div>

    <script src="~/assets/plugins/pace/pace.min.js" type="text/javascript"></script>
    <script src="~/assets/plugins/jquery/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="~/assets/plugins/bootstrapv3/js/bootstrap.min.js" type="text/javascript"></script>
</body>
</html>
<script>
    $(document).ready(function () {
           if ('@HttpContext.Current.Request.Cookies["UserName"].Value' != '0' && '@HttpContext.Current.Request.Cookies["Password"].Value' != '0') {
               if ('@HttpContext.Current.Request.Cookies["UserName"].Value' != '0' && '@HttpContext.Current.Request.Cookies["Password"].Value' != '0') {
                   $('#txtemail').val('@Request.Cookies["UserName"].Value');
                   $('#txtpassword').val('@Request.Cookies["Password"].Value');
               }  }
    })

    function CheckLogin() {
        debugger;
        var isvalid = true;
        $('.required').each(function () {
            if ($.trim($(this).val()) == '') {
                isvalid = false;
                $(this).parent().parent().addClass("has-error")
            }
            else {
                $(this).parent().parent().removeClass("has-error")
            }
        });
        if (!isValidEmailAddress($("#txtemail").val())) {
            $('#txtemail').parent().parent().addClass("has-error")
            isvalid = false;
        }
        else {
            $('#txtemail').parent().parent().removeClass("has-error")
        }
        if (isvalid) {
            return true
        }
        return false
    }
    function showForgotPass() {
        $('#login').addClass('hide')
        $('#forgot').removeClass('hide')
    }
    function hideForgotPass() {
        $('#login').removeClass('hide')
        $('#forgot').addClass('hide')
    }
    function isValidEmailAddress(emailAddress) {
        var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
        return pattern.test(emailAddress);
    };
       function SendForgotaPassword() {
            var isValid = true;

            if ($.trim($('#txtforgotemail').val()) == '') {
                isValid = false;
                $('#txtforgotemail').parent().parent().addClass("has-error")
            }
            else {
                $('#txtforgotemail').parent().parent().removeClass("has-error")
            }
            if (!isValidEmailAddress($("#txtforgotemail").val())) {
                $('#txtforgotemail').parent().parent().addClass("has-error")
                isValid = false;
            }
            else {
                $('#txtforgotemail').parent().parent().removeClass("has-error")
            }
            if (isValid) {
                var jsonData = {
                    EmailId: $('#txtforgotemail').val()
                };
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("ForgotPassword", "Login")',
                    data: JSON.stringify(jsonData),
                    contentType: 'application/json; charset=utf-8'
                }).done(function (data) {
                    if (data != 0) {
                        $('#txtemailid').val('');
                        alert('Password Sent Successfully.')
                        toastr.success('Password Sent Successfully.')
                    } else {
                        alert('Email address not found.')
                        toastr.error('Email address not found.')
                    }
                })
            }
    }


</script>